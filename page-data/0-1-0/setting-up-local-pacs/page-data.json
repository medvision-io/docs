{
    "componentChunkName": "component---src-templates-page-template-tsx",
    "path": "/0-1-0/setting-up-local-pacs",
    "result": {"data":{"markdownRemark":{"html":"<h2 id=\"tldr\" style=\"position:relative;\">TLDR:<a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>If you didn't get your TSL certificate file execute <a href=\"/latest/setting-up-local-pacs#generate-local-tsl-certificate-only-once-every-365-days\">Generate local TSL</a> first.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/zhiva-ai/pacs-server.git\n\ndocker-compose up</code></pre></div>\n<h2 id=\"requirements\" style=\"position:relative;\">Requirements<a href=\"#requirements\" aria-label=\"requirements permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Before we start please make sure your server has access to:</p>\n<ul>\n<li>Unix-base shell</li>\n<li><a href=\"https://docs.docker.com/get-docker/\">Docker</a></li>\n<li><a href=\"https://docs.docker.com/compose/install/\">Docker Compose</a></li>\n<li><a href=\"https://www.openssl.org/\">OpenSSL</a></li>\n</ul>\n<h2 id=\"get-the-server-code\" style=\"position:relative;\">Get the server code<a href=\"#get-the-server-code\" aria-label=\"get the server code permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>You can either clone this repo</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/zhiva-ai/pacs-server.git</code></pre></div>\n<p>or download it directly from\n<a href=\"https://github.com/zhiva-ai/pacs-server/archive/refs/heads/main.zip\">zhiva.ai PACS server</a>.</p>\n<h2 id=\"generate-local-tsl-certificate-only-once-every-365-days\" style=\"position:relative;\">Generate local TSL certificate (only once every 365 days)<a href=\"#generate-local-tsl-certificate-only-once-every-365-days\" aria-label=\"generate local tsl certificate only once every 365 days permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>If you already have the <code class=\"language-text\">.crt</code> and <code class=\"language-text\">.key</code> files do not generate them again. Go straight to <a href=\"#build-the-server\">Build the server section</a> and run your server with existing certificate.</p>\n</blockquote>\n<p>Before we starty storing data on the server we have to secure the connection between the server and the viewer. We're going to use <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\">Transport Layer Security (TSL)</a>. First, we have to generate certificate (<code class=\"language-text\">.crt</code>) and key (<code class=\"language-text\">.key</code>) files. Because we're doing it from the local server we're going to use <a href=\"https://www.openssl.org/\">OpenSSL</a> (we don't need external party to sign certificate, if you want to use it on the external server you should sign with something like <a href=\"https://letsencrypt.org/\">Let's Encrypt</a>).</p>\n<p>To generate local certifiate please execute following command in the terminal window (make sure <code class=\"language-text\">openssl</code> is installed).</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">openssl req -x509 <span class=\"token punctuation\">\\</span>\n    -nodes -days <span class=\"token number\">365</span> <span class=\"token punctuation\">\\</span>\n    -newkey rsa:2048 <span class=\"token punctuation\">\\</span>\n    -keyout zhiva.key <span class=\"token punctuation\">\\</span>\n    -out zhiva.crt <span class=\"token punctuation\">\\</span>\n    -subj <span class=\"token string\">\"/C=PL/L=Wroclaw/O=Your Company, Inc./CN=localhost\"</span></code></pre></div>\n<p>Change <code class=\"language-text\">-subj</code> to describe your organization:</p>\n<ul>\n<li><code class=\"language-text\">C</code> - country code (2 letter code)</li>\n<li><code class=\"language-text\">L</code> - location (city name)</li>\n<li><code class=\"language-text\">O</code> - organization name</li>\n<li><code class=\"language-text\">CN</code> - full domain name (use <code class=\"language-text\">localhost</code> for local servers)</li>\n</ul>\n<p>Then copy <code class=\"language-text\">.crt</code> file as trusted certificate:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cat</span> zhiva.crt <span class=\"token operator\">></span> trusted.crt</code></pre></div>\n<h2 id=\"setup-your-local-server\" style=\"position:relative;\">Setup your local server<a href=\"#setup-your-local-server\" aria-label=\"setup your local server permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>At this point you should have 2 <code class=\"language-text\">.crt</code> files and 1 <code class=\"language-text\">.key</code> file. Check this by calling</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">ls</span> *.<span class=\"token punctuation\">{</span>crt,key<span class=\"token punctuation\">}</span></code></pre></div>\n<p>from your main directory. It should return following result <code class=\"language-text\">trusted.crt  zhiva.crt  zhiva.key</code>.</p>\n<p>If one of those files is missing go back to <a href=\"#generate-local-tsl-certificate-only-once-every-365-days\">Generate local TSL certificate</a> section and make sure you have all of them.</p>\n<h3 id=\"build-the-server\" style=\"position:relative;\">Build the server<a href=\"#build-the-server\" aria-label=\"build the server permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">docker-compose up</code></pre></div>\n<p>After starting the server you should be able to access <a href=\"https://localhost/zhiva/app/explorer.html#upload\">localhost/zhiva/app/explorer.html#upload</a> where you can upload your files.</p>\n<blockquote>\n<p>You might be prompted with the message about invalid SSL certificate. This is caused by using OpenSSL to generate certificate for <code class=\"language-text\">localhost</code> and that certificate has no 3rd party that confirms its authenticity. It's fine for local network but remember to use proper certificate if the server is accessible from outside your network.</p>\n</blockquote>\n<h2 id=\"access-from-within-internal-network\" style=\"position:relative;\">Access from within internal network<a href=\"#access-from-within-internal-network\" aria-label=\"access from within internal network permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>If you have more than one computer inside your network (or VPN connection), then you can share the server settings with them. To check the server address please run the following command:</p>\n<p>Linux or Mac:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ifconfig</span></code></pre></div>\n<p>Windows</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ipconfig</code></pre></div>\n<p>and look for the setting with the <code class=\"language-text\">inet</code> value that starts with <code class=\"language-text\">192.168.</code>. That should by your address in the local network. You should be able to access the upload page from <code class=\"language-text\">192.168.x.x:8042/app/explorer.html</code>.</p>\n<h2 id=\"upload-your-dicoms\" style=\"position:relative;\">Upload your DICOMs<a href=\"#upload-your-dicoms\" aria-label=\"upload your dicoms permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Go to <a href=\"https://localhost/zhiva/app/explorer.html#upload\">localhost/zhiva/app/explorer.html#upload</a> and click on <code class=\"language-text\">Select files to upload</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 360px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/8ef26/upload-dicoms.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.46875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuElEQVQoz43K22/SABjG4f7Bc0amcdkViXCrGbswS4TB2J03DuOBGWM0YjLFncKAUtquZ5ABK8xSCvRn1k3jCefFk/d9v3zC9OwVofuEmVsgdLeZuduEV/0Xg8J/ETzXZjJUCIYqwUBheq4yHiiRiz0ZqpHRmYzXv54wcgqYx+s49QwtMY28t05X3qAjZSJOLY1dS+PbecLOFrNrCL72gNrbG5R3biKWYpRfLlB9F6NRusXR60U+FRcoFxcZNpYJjRUwV8CYT/DNLLTvQycFzip01+A0BV+unK5d3lopQnv1WsJYf0jpWYyPL+6wW7zNwZtlPjxf4v3TJXZ37hLo95iZiUhoJcBKgj2fcG4+ZtLaYOzkmLRzjJ0snpnFt3MErU3CTg4udDcj01aGsf2IYA6h3x9QE5tUqiKiKFGpNWhIMkeVGp/3DpEVjeO6zP5hlf2DCp2uyzgIGfnTvxL6vS66rtGUZUxDR1FVZFmOUhTrKEoTqdlEkiQkqUGv38P3R3jeV0ae9weh3W5j6DqWaWIYBqZp/mBZ1k/9kqZpqKrKyYka5e+EfD5PPB4nmUxGEonEP33/m+cbzLj1fn9fG84AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/5e4cb/upload-dicoms.webp 256w,\n/static/e677f39fcf1cda14e9ab6fa629c681e0/2144c/upload-dicoms.webp 360w\"\n              sizes=\"(max-width: 360px) 100vw, 360px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/9dd4e/upload-dicoms.png 256w,\n/static/e677f39fcf1cda14e9ab6fa629c681e0/8ef26/upload-dicoms.png 360w\"\n            sizes=\"(max-width: 360px) 100vw, 360px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/8ef26/upload-dicoms.png\"\n            alt=\"Upload dicoms screenshot\"\n            title=\"Upload dicoms screenshot\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>After selecting all the DICOMs click <code class=\"language-text\">Start the upload</code> to store them on the server.</p>\n<p>All DICOMs are stored in <a href=\"https://docs.docker.com/storage/volumes/\">Docker's persistent volume</a> so even after restarting the server all your files are still accessible.</p>\n<p>Now you should be able to access studies which were generated after uploading DICOM files. List of studies is available at <a href=\"https://localhost/zhiva/app/explorer.html#find-studies\">https://localhost/zhiva/app/explorer.html#find-studies</a>.</p>\n<h2 id=\"faqs\" style=\"position:relative;\">FAQs<a href=\"#faqs\" aria-label=\"faqs permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><em>\"How to use this server with your DICOM viewer?\"</em></li>\n</ul>\n<p>Detailed instruction is described in <a href=\"/latest/managing-servers-inside-the-dicom-viewer#zhivaai-local-server-setup\">Managing servers inside the DICOM viewer</a> guide.</p>\n<ul>\n<li><em>\"Why my server doesn't accept very large DICOM files?\"</em></li>\n</ul>\n<p>There is an maximum file size setting inside server config. If you want to change that please go to <code class=\"language-text\">./nginx.conf</code> and modify:</p>\n<div class=\"gatsby-highlight\" data-language=\"nginxconfiguration\"><pre class=\"language-nginxconfiguration\"><code class=\"language-nginxconfiguration\">client_max_body_size 2000m;</code></pre></div>\n<h2 id=\"customization\" style=\"position:relative;\">Customization<a href=\"#customization\" aria-label=\"customization permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"url\" style=\"position:relative;\">URL<a href=\"#url\" aria-label=\"url permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>You're able to change server url by modifying two settings:</p>\n<ul>\n<li><code class=\"language-text\">orthanc.json</code> - inner server settings</li>\n<li><code class=\"language-text\">nginx.conf</code> - main server settings</li>\n</ul>\n<p>Inside <code class=\"language-text\">orthanc.json</code> go to <code class=\"language-text\">DicomWeb</code> attribute and change <code class=\"language-text\">Root</code> property. This property is responsible for path to <code class=\"language-text\">dicom-web</code> server (the one used by the viewer).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// orthanc.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"DicomWeb\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    <span class=\"token string\">\"Root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/pacs/\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you want to change main path to your server you have to modify the second setting (<code class=\"language-text\">nginx.conf</code>). Path is defined as a location and rewrite (reverse-proxy). Change following lines</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// nginx.conf</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    location <span class=\"token operator\">/</span>zhiva <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n      rewrite <span class=\"token operator\">/</span><span class=\"token function\">zhiva</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> $<span class=\"token number\">1</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>you can change it to:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// nginx.conf</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    location <span class=\"token operator\">/</span>serv <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n      rewrite <span class=\"token operator\">/</span><span class=\"token function\">serv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> $<span class=\"token number\">1</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>and access your server at <code class=\"language-text\">https://localhost/serv/...</code></p>\n<h3 id=\"storage\" style=\"position:relative;\">Storage<a href=\"#storage\" aria-label=\"storage permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Currently, all the data are stored in <a href=\"https://docs.docker.com/storage/volumes/\">Docker's persistent volume</a>. This is volume created by Docker itself. If you want to specify the path please follow the instruction from the <a href=\"https://docs.docker.com/compose/compose-file/compose-file-v3/#short-syntax-3\">Docker Docs</a> about setting up directories as volumes.</p>","fields":{"slug":"/setting-up-local-pacs"},"frontmatter":{"date":"December 17, 2021","title":"Setting up Local PACS","category":"dicom-server","description":"How to setup local server to store DICOM files and use it as a data provider for the app?"}},"openapiYaml":{"info":{"contact":{"email":"ceo@zhiva.ai","url":"https://zhiva.ai"},"description":"This is a documentation for _zhiva.ai_ products.\n\n# Introduction\n\nPlease select your section of interest from the menu on the left.\n","termsOfService":"https://zhiva.ai/terms/","title":"zviha.ai","version":"0.1.0"},"openapi":"3.1.0","x_tagGroups":[{"name":"Segmentation","section":"inferences","tags":[{"name":"Semantic Segmentation","slug":"semantic-segmentation"}],"slug":"segmentation"},{"name":"Annotations","section":"inferences","tags":[{"name":"Polygon","slug":"polygon"}],"slug":"annotations"}],"spec":"{\"openapi\":\"3.1.0\",\"info\":{\"version\":\"0.1.0\",\"title\":\"zviha.ai\",\"termsOfService\":\"https://zhiva.ai/terms/\",\"contact\":{\"email\":\"ceo@zhiva.ai\",\"url\":\"https://zhiva.ai\"},\"description\":\"This is a documentation for _zhiva.ai_ products.\\n\\n# Introduction\\n\\nPlease select your section of interest from the menu on the left.\\n\"},\"tags\":[{\"name\":\"Semantic Segmentation\",\"description\":\"Semantic Segmentation API\"},{\"name\":\"Polygon\",\"description\":\"Polygon Annotations\"}],\"x-tagGroups\":[{\"name\":\"Segmentation\",\"section\":\"inferences\",\"tags\":[\"Semantic Segmentation\"],\"slug\":\"segmentation\"},{\"name\":\"Annotations\",\"section\":\"inferences\",\"tags\":[\"Polygon\"],\"slug\":\"annotations\"}],\"servers\":[{\"url\":\"https://api.zhiva.ai/v1\"}],\"paths\":{\"/segmentations/{model-uid}/studies/{study-uid}\":{\"get\":{\"tags\":[\"Semantic Segmentation\"],\"summary\":\"Get segmentation for study\",\"description\":\"Should return segmentation data for a given segment. Response size should match entire volumen size (`images in series` x `width` x `height`)\\n\",\"operationId\":\"getSegmentationForSeries\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/StudySegmentation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/segmentations/{model-uid}/studies/{study-uid}/series/{series-uid}\":{\"get\":{\"tags\":[\"Semantic Segmentation\"],\"summary\":\"Get segmentation for series\",\"description\":\"Should return segmentation data for a given segment. Response size should match entire volumen size (`images in series` x `width` x `height`)\\n\",\"operationId\":\"getSegmentationForSeries\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/SeriesSegmentation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/segmentations/{model-uid}/studies/{study-uid}/series/{series-uid}/instances/{sop-instance-uid}\":{\"get\":{\"tags\":[\"Semantic Segmentation\"],\"summary\":\"Get segmentation for instance\",\"description\":\"Should return segmentation data for a given segment. Response size should match entire volumen size (`width` x `height`)\\n\",\"operationId\":\"getSegmentationForInstance\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from study\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"sop-instance-uid\",\"in\":\"path\",\"description\":\"SOPInstanceUID from series\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SOPInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.9\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/InstanceSegmentation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/annotations/{model-uid}/studies/{study-uid}\":{\"get\":{\"tags\":[\"Polygon\"],\"summary\":\"Get annotations for study\",\"description\":\"Should return annotation data for a given structure. Response size should match entire volumen size (`images in series`)\\n\",\"operationId\":\"getAnnotationsForStudies\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/StudyAnnotation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/annotations/{model-uid}/studies/{study-uid}/series/{series-uid}\":{\"get\":{\"tags\":[\"Polygon\"],\"summary\":\"Get annotations for series\",\"description\":\"Should return annotation data for a given structure. Response size should match entire volumen size (`images in series` x `width` x `height`)\\n\",\"operationId\":\"getAnnotationsForSeries\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/SeriesAnnotation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/annotations/{model-uid}/studies/{study-uid}/series/{series-uid}/instances/{sop-instance-uid}\":{\"get\":{\"tags\":[\"Polygon\"],\"summary\":\"Get annotations for instance\",\"description\":\"Should return annotations data for a given instance. Response size should match entire volumen size (`width` x `height`)\\n\",\"operationId\":\"getSegmentationForInstance\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from study\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"sop-instance-uid\",\"in\":\"path\",\"description\":\"SOPInstanceUID from series\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SOPInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.9\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/InstanceAnnotation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}}},\"components\":{\"securitySchemes\":{\"main_auth\":{\"type\":\"oauth2\",\"flows\":{\"implicit\":{\"authorizationUrl\":\"http://example.com/api/oauth/dialog\",\"scopes\":{\"read:models\":\"read users info\"}}}},\"api_key\":{\"type\":\"apiKey\",\"in\":\"header\",\"name\":\"api_key\"}},\"schemas\":{\"Points\":{\"type\":\"array\",\"items\":{\"type\":\"array\",\"items\":{\"type\":\"integer\"},\"example\":[[0,0,1,0],[0,1,1,0]]}},\"Segment\":{\"description\":\"Segment definition (one slide)\",\"type\":\"object\",\"properties\":{\"points\":{\"$ref\":\"#/components/schemas/Points\"},\"color\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"classColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"activeColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"className\":{\"type\":\"string\",\"example\":\"Lung\"},\"description\":{\"type\":\"string\"}}},\"Frame\":{\"description\":\"Slice frame\",\"type\":\"object\",\"properties\":{\"segments\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Segment\"}}}},\"StudySegmentation\":{\"type\":\"object\",\"properties\":{\"{StudyInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SeriesInstanceUID-1}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID-1}\":{\"$ref\":\"#/components/schemas/Frame\"}}},\"{SeriesInstanceUID-2}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID-1}\":{\"$ref\":\"#/components/schemas/Frame\"}}}}}}},\"Problem\":{\"type\":\"object\",\"additionalProperties\":true,\"minProperties\":1,\"description\":\"The Problem Details JSON Object [[RFC7807](https://tools.ietf.org/html/rfc7807)].\",\"properties\":{\"type\":{\"type\":\"string\",\"description\":\"A URI reference [[RFC3986](https://tools.ietf.org/html/rfc3986)] that identifies the problem type. It should provide human-readable documentation for the problem type. When this member is not present, its value is assumed to be \\\"about:blank\\\".\",\"format\":\"uri\"},\"title\":{\"type\":\"string\",\"description\":\"A short, human-readable summary of the problem type. It SHOULD NOT change from occurrence to occurrence of the problem, except for purposes of localization.\"},\"status\":{\"type\":\"integer\",\"description\":\"The HTTP status code.\",\"minimum\":400,\"maximum\":599},\"detail\":{\"type\":\"string\",\"description\":\"A human-readable explanation specific to this occurrence of the problem.\"},\"instance\":{\"type\":\"string\",\"description\":\"A URI reference that identifies the specific occurrence of the problem.  It may or may not yield further information if dereferenced.\"}}},\"SeriesSegmentation\":{\"type\":\"object\",\"properties\":{\"{StudyInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SeriesInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID-1}\":{\"$ref\":\"#/components/schemas/Frame\"}}}}}}},\"InstanceSegmentation\":{\"description\":\"Segmentation object\",\"type\":\"object\",\"properties\":{\"{StudyInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SeriesInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID}\":{\"$ref\":\"#/components/schemas/Frame\"}}}}}}},\"RoiPoints\":{\"type\":\"array\",\"items\":{\"type\":\"array\",\"length\":2,\"items\":{\"type\":\"integer\"}},\"example\":[[120,130],[110,130],[75,100]]},\"Annotation\":{\"description\":\"Annotation definition (one slide)\",\"type\":\"object\",\"properties\":{\"points\":{\"$ref\":\"#/components/schemas/RoiPoints\"},\"color\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"classColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"activeColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"className\":{\"type\":\"string\",\"example\":\"Lung\"},\"description\":{\"type\":\"string\"}}},\"AnnotationFrame\":{\"description\":\"Slice frame\",\"type\":\"object\",\"properties\":{\"rois\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Annotation\"}}}},\"StudyAnnotation\":{\"type\":\"object\",\"properties\":{\"{StudyInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SeriesInstanceUID-1}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID-1}\":{\"$ref\":\"#/components/schemas/AnnotationFrame\"}}},\"{SeriesInstanceUID-2}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID-1}\":{\"$ref\":\"#/components/schemas/AnnotationFrame\"}}}}}}},\"SeriesAnnotation\":{\"type\":\"object\",\"properties\":{\"{StudyInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SeriesInstanceUID-1}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID-1}\":{\"$ref\":\"#/components/schemas/AnnotationFrame\"}}}}}}},\"InstanceAnnotation\":{\"description\":\"Annotation object\",\"type\":\"object\",\"properties\":{\"{StudyInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SeriesInstanceUID}\":{\"type\":\"object\",\"properties\":{\"{SOPInstanceUID}\":{\"$ref\":\"#/components/schemas/AnnotationFrame\"}}}}}}}},\"responses\":{\"Problem\":{\"content\":{\"application/problem+json\":{\"schema\":{\"$ref\":\"#/components/schemas/Problem\"}}}}}}}","slug":"0-1-0","tags":[{"description":"Semantic Segmentation API","name":"Semantic Segmentation"},{"description":"Polygon Annotations","name":"Polygon"}]},"site":{"siteMetadata":{"categories":[{"name":"Inferences","key":"inferences"},{"name":"Annotations","key":"annotation"},{"name":"Storage","key":"storage"},{"name":"Hosting","key":"hosting"},{"name":"Machine Learning","key":"ml"},{"name":"DICOM Server","key":"dicom-server"},{"name":"AI Model APIs","key":"model-api"}]}}},"pageContext":{"markdownid":"14ff58e3-f810-5bba-8682-48c52cbd719a","verid":"19b7e56b-b384-5e5c-bab7-71d7d890fb2d"}},
    "staticQueryHashes": ["1428769721","561272883"]}