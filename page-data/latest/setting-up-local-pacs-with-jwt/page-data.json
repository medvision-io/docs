{
    "componentChunkName": "component---src-templates-page-template-tsx",
    "path": "/latest/setting-up-local-pacs-with-jwt",
    "result": {"data":{"markdownRemark":{"html":"<blockquote>\n<p>This is an advance PACS configuration that might not be required if you're using PACS for your local project.</p>\n</blockquote>\n<h2>TLDR:</h2>\n<p>If you didn't get your TSL certificate file execute <a href=\"/latest/setting-up-local-pacs-with-jwt#generate-local-tsl-certificate-only-once-every-365-days\">Generate local TSL</a> first.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/zhiva-ai/pacs-token-server.git\n\ndocker-compose up</code></pre></div>\n<h2 id=\"requirements\" style=\"position:relative;\">Requirements<a href=\"#requirements\" aria-label=\"requirements permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Before we start please make sure your server has access to:</p>\n<ul>\n<li>Unix-base shell</li>\n<li><a href=\"https://docs.docker.com/get-docker/\">Docker</a></li>\n<li><a href=\"https://docs.docker.com/compose/install/\">Docker Compose</a></li>\n<li><a href=\"https://www.openssl.org/\">OpenSSL</a></li>\n</ul>\n<h2 id=\"get-the-server-code\" style=\"position:relative;\">Get the server code<a href=\"#get-the-server-code\" aria-label=\"get the server code permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>You can either clone this repo</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/zhiva-ai/pacs-token-server.git</code></pre></div>\n<p>or download it directly from\n<a href=\"https://github.com/zhiva-ai/pacs-token-server/archive/refs/heads/main.zip\">ZhivaAI JWT PACS server</a>.</p>\n<h2 id=\"generate-local-tsl-certificate\" style=\"position:relative;\">Generate local TSL certificate<a href=\"#generate-local-tsl-certificate\" aria-label=\"generate local tsl certificate permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>(only once every 365 days)</p>\n<blockquote>\n<p>If you already have the <code class=\"language-text\">.crt</code> and <code class=\"language-text\">.key</code> files do not generate them again. Go straight to <a href=\"#build-the-server\">Build the server section</a> and run your server with existing certificate.</p>\n</blockquote>\n<p>Before we starty storing data on the server we have to secure the connection between the server and the viewer. We're going to use <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\">Transport Layer Security (TSL)</a>. First, we have to generate certificate (<code class=\"language-text\">.crt</code>) and key (<code class=\"language-text\">.key</code>) files. Because we're doing it from the local server we're going to use <a href=\"https://www.openssl.org/\">OpenSSL</a> (we don't need external party to sign certificate, if you want to use it on the external server you should sign with something like <a href=\"https://letsencrypt.org/\">Let's Encrypt</a>).</p>\n<p>To generate local certifiate please execute following command in the terminal window (make sure <code class=\"language-text\">openssl</code> is installed).</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">openssl req -x509 <span class=\"token punctuation\">\\</span>\n    -nodes -days <span class=\"token number\">365</span> <span class=\"token punctuation\">\\</span>\n    -newkey rsa:2048 <span class=\"token punctuation\">\\</span>\n    -keyout zhiva.key <span class=\"token punctuation\">\\</span>\n    -out zhiva.crt <span class=\"token punctuation\">\\</span>\n    -subj <span class=\"token string\">\"/C=PL/L=Wroclaw/O=Your Company, Inc./CN=localhost\"</span></code></pre></div>\n<p>Change <code class=\"language-text\">-subj</code> to describe your organization:</p>\n<ul>\n<li><code class=\"language-text\">C</code> - country code (2 letter code)</li>\n<li><code class=\"language-text\">L</code> - location (city name)</li>\n<li><code class=\"language-text\">O</code> - organization name</li>\n<li><code class=\"language-text\">CN</code> - full domain name (use <code class=\"language-text\">localhost</code> for local servers)</li>\n</ul>\n<p>Then copy <code class=\"language-text\">.crt</code> file as trusted certificate:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cat</span> zhiva.crt <span class=\"token operator\">></span> trusted.crt</code></pre></div>\n<h2 id=\"setup-your-local-server\" style=\"position:relative;\">Setup your local server<a href=\"#setup-your-local-server\" aria-label=\"setup your local server permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>At this point you should have 2 <code class=\"language-text\">.crt</code> files and 1 <code class=\"language-text\">.key</code> file. Check this by calling</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">ls</span> *.<span class=\"token punctuation\">{</span>crt,key<span class=\"token punctuation\">}</span></code></pre></div>\n<p>from your main directory. It should return following result <code class=\"language-text\">trusted.crt zhiva.crt zhiva.key</code>.</p>\n<p>If one of those files is missing go back to <a href=\"#generate-local-tsl-certificate-only-once-every-365-days\">Generate local TSL certificate</a> section and make sure you have all of them.</p>\n<h3 id=\"setup-jwts\" style=\"position:relative;\">Setup JWTs<a href=\"#setup-jwts\" aria-label=\"setup jwts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4 id=\"generate-private-and-public-tokens\" style=\"position:relative;\">Generate private and public tokens<a href=\"#generate-private-and-public-tokens\" aria-label=\"generate private and public tokens permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">openssl genrsa -out jwt_priv.pem <span class=\"token number\">512</span>\nopenssl rsa -pubout -in jwt_priv.pem -out jwt_pub.pem</code></pre></div>\n<h4 id=\"generate-server-settings\" style=\"position:relative;\">Generate server settings<a href=\"#generate-server-settings\" aria-label=\"generate server settings permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Run setup docker image</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker-compose --file ./setup/docker-compose.yml build zhiva_setup\ndocker-compose --file ./setup/docker-compose.yml run zhiva_setup</code></pre></div>\n<p>You should be prompted for admin password (<code class=\"language-text\">Enter the admin password: </code>). Store that password in your password management software becuase you won't e able to read it directly.</p>\n<p>Setup configuration should be stored in <code class=\"language-text\">.env</code> file.</p>\n<h4 id=\"build-the-server\" style=\"position:relative;\">Build the server<a href=\"#build-the-server\" aria-label=\"build the server permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>For <strong>Macbook M1/M2</strong> (any Apple Silicon chips):</p>\n<ul>\n<li>Go to <code class=\"language-text\">./auth-server/Dockerfile</code></li>\n<li>change <code class=\"language-text\">FROM node:18-alpine</code> to <code class=\"language-text\">FROM node:18</code></li>\n</ul>\n<p>Run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shel\"><pre class=\"language-shel\"><code class=\"language-shel\">docker-compose up</code></pre></div>\n<p>For <strong>everyone else</strong> (including macbooks with Intel chips):</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">docker-compose up</code></pre></div>\n<p>After starting the server you should be able to access <a href=\"https://localhost/zhiva/app/explorer.html#upload\">localhost/zhiva/app/explorer.html#upload</a> where you can upload your files.</p>\n<blockquote>\n<p>Important!!!</p>\n<p>You might be prompted with the message about invalid SSL certificate. This is caused by using OpenSSL to generate certificate for <code class=\"language-text\">localhost</code> and that certificate has no 3rd party that confirms its authenticity. It's fine for local network but remember to use proper certificate if the server is accessible from outside your network.</p>\n</blockquote>\n<h2 id=\"user-accounts\" style=\"position:relative;\">User accounts<a href=\"#user-accounts\" aria-label=\"user accounts permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>Warning !!!</p>\n<p>Firefox has an issue with origin forwarding when \"JavaScript code is running with enhanced privileges\" which translates to \"when running on not signed certificate website\". This cannot be helper so please use another browser for things like generating tokens (e.g. Chrome).</p>\n</blockquote>\n<p>For every user in your system you have to generate new user account. To do this, you should access <a href=\"https://localhost/auth/token\">https://localhost/auth/token</a> and enter required fields. <strong>Admin Password</strong> is the password you've entered in <a href=\"#generate-server-settings\">Generate server settings</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 457px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a03bbb168f6860a4571036aacec753d8/700e1/generate-token-page-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 144.921875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEj0lEQVRIx52WS2xUVRjHUXFtghvAJRJ0owIxMTEQiZhoIkJCIj7AhUY3Apqg0YAiigShbCjdgMa4UDfIgoanfZAqaEuZPmeGmbl3nvc102k7hbZz3/Mz98y0M6WjRhe/nMl85/zveXz/850lDz17hIc3HuWRF06wcnNzVmxuEfxdPBi7bONRAq0lS9d9wTtfXkJSPQYTswzL5UWEkyYR2WwaC8YkFJft+37hwfWHWPLA2oN82NLF+DSkjQrZAnXGIKNDKGvTN+aSbozVSOcrFO/CW5+1E0xOCO451kG+BAnVI6n7Aln3SRk+supxbqjEydwdBsYcsnpFxOb6BSszJuHN/efrgnsDwSlEcK5jyqgQU31GMz630jY3FIdIzkfSqrF5Qc3DKMHOewULU5DSPdKGL8gVKoTSHu2jDp1Rl46Iy/kRh5GsT+ZfBY93oE7CcMYjplaIKhVuq1UkrSL2KVMjmF0jsuYvFvzgeCepMbgyUuZG3KI7Yon2WtSiN2Ejqw5xxSHRBElxxP7PCy5de5Dd33RSmgbbdrFsD9upYzk+pu0txvKwbR998i5K0WXn/va64J5jnUxM+czOmpRNW2CWbcrloLXEb9O0scxaa7uYtis+qExMkSs67DzQkDZ7W7owNBNpIEsqYpCO5kmGDVIBI5r4TxrRkUYNpGENWbGQNVdsRVJzFy65uocdpIrwa9SnNwk9iQp/JuG6BL/XkAxIGiAH6HUSaqVZ2nSSn4SYUiapWyQ0i5RhIet1tKKNPsd4gCNQCqZI7PqhrAsOpYOpmQrgA5UafkPrQqUJ+CiT42QKJrsW7OHxLgqGSS6moaaKaAGZcVQ5j5qZQCtWZxPM8l6y+XtmWBXspDAO8cQdpOQsCXmGmDRNXJpGTpeRVF8kcEqvJ3S61krNEjtIm8kZGJJnuNA3QUdogot9RboHS1y9NcHVm2N0D04RVXzh53DOZzRbbWOKt/iUg9tm/A4MpRwujNj0xFyu3XbpjjpcGXXoiTn0Jz3h7VDKoz/l0St73Ex6hLMehWZpo0xAn+zRm/TpS/r0yj43k8GMKsLf4v7LV+YJLo9s4R+8LBegK2LSK9nCx9fjFv2yjaw5pDQHSW3OosRu9LLruriutwDLaUB4vY4jrFciN2bXrTfv5ZLH7HRZ+Lc8a1OesQSBjy3TEZj2wosiuByM0jTqeMPlMOdlXbMY7k0THtQJD+mEQyrhAZWR/hyhP1KEBguEMzaRtEkkbdUwiaatah4eqC35vic/59PWHr5vj7N88wnWbGtj9SunWL21jVVbWnlix2le2v0zL77/E49va2PVy62s3tLKo1taWbP1FMufb+Fcd5b3Dl/m/qcOVgU/OdnDj5dl0eHpN75l/etnBGt3nGbD2z/w6sdn2f7RWZ7Z9R3rXjszHw/6PratjfbfVN796lJVsLHqxRVX1Ig5ZM0TNTeStolkbFEVG+MBwZhFVW++LuchN7YYpVilWSyTZ2FdFi+HQxdFbRiITzMkzfwngjHxnMP2fWerL4fgPbJswxFWbvqaFc8d/n9sqmoEb5u/ANypUyldfUf+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a03bbb168f6860a4571036aacec753d8/5e4cb/generate-token-page-1.webp 256w,\n/static/a03bbb168f6860a4571036aacec753d8/a27fe/generate-token-page-1.webp 457w\"\n              sizes=\"(max-width: 457px) 100vw, 457px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a03bbb168f6860a4571036aacec753d8/9dd4e/generate-token-page-1.png 256w,\n/static/a03bbb168f6860a4571036aacec753d8/700e1/generate-token-page-1.png 457w\"\n            sizes=\"(max-width: 457px) 100vw, 457px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a03bbb168f6860a4571036aacec753d8/700e1/generate-token-page-1.png\"\n            alt=\"Create user account\"\n            title=\"Create user account\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Enter user's new password</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 429px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8735d3af1d12bb2b3bb79d1303c5de89/1bcb2/generate-token-page-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 137.109375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEXElEQVRIx52Vy28bVRSHwxIWBYRgDxvof4DaVKJbWFCJDX9H2VaopY1YUKkShW0lqAQIkTYtTeq0iV+xnZffdmzH9jj2ePyK60die/yYGX9o7jghblIqsfh0r84585v7OOfcmXMXbnH7fhBH4AWL3jJPfZVT2NYr2M6wmyyZ/o0qj1xFPvz8DjPvzM6x5CvTVkF5AZXmSzSguA9yG6rN0/6yObag3IDzV35i5p2Lc8zbC5QasFvUyJZ0QWZCVtb5K9Lk+2yT5VqfvGKQnsQcxWXLBmlF4+Mvf7QEHzoK4m+mM1cZC6SywV51TLEyZjurYiurJOs68sRnxfw7z5YMPnmVoPnHvcoYf05nITJiNaHjTOg8CGn4srrwZY9FXyNoBuSrYyp1KzhaMIgUDJKKQTBvba9aH1OsWf5XC7YQxkJ1jC+j8yiqCdxpXfAsobEp6TxPaDyJa6wkj47nLEGnPHUpgZzGsx2N1aSGPamxvDPCFh/hy2gsxUYsxTXcu5p1IaWXBN++OMcjl0w4O2TF3+LZdgtX6ABvuM1aqI0r2MYbOWAt2MbhbwnbVvwQT6iNbbOJf7dPvoZYyJSgf3cgAtyRQ7zxrhg9sQ7uSAdvrMtGooczdIAzfCgw/dsplVRRF9kwJbjgkkkVNHyxQwpVg1IdlH0o1MbigvYm5GtjccOm7ch+5hkuOAtkauDPGYJtyWA7Z5Asjk/k26s5dYYLTpkdBTwpla3sgLXdAb70gIQ8JFcekS2NkP4DuWpMtnzXquV5u8xgaDA2NMaGAWMLXdcZaSbGZDyNpukkS/tklNEJQYfMwcGQTkel2x1M0RP06akj1L6G2j8aNXrmfKCRLjdOCJp56CpSklqkgzLSTpVsvIqUqCHFykgRBSlaQsr3rLxTtCkyiiaK4fiWjxI7XwfvzgBvYshGaoR7Zyjm68khnsSIYFajUANp0jyOm0hlfNYty0gVWA31eB5UWQ1b2Pw9VkOqsD319/BnRiJdrPq1OLOWhWAV7GHVItLHGe2zHLCE7WFrvrU7PBY8ydmCZVgJdFgJdFkN9rCHuiz7u0T3rHpNK8akbo3XC5rdptAGnwSejIUvB46EgSui4o4NWAmpbKSGolryVaYwz9Zsa1ZiX7jJ4/V9Nu4vMH/1GovXf2Dxxm0eXL3G+kMHcgtyZatVmdtN5Ie4Qw08kSbeaJO1cANfrCWeAJE25z69wWLokN+++pqbb73Jvc8uc+/yZa6/McP8N99S7EK2OLIabw1C6S5/LEs8cRd56lVYcBR4YM+Tkkecv3LXXOEtHrpLxNfi2H95jPt3m8D569+EfGly5nYUq0+aouaHgVRH4DdJdgile6SL2uQMZ+d44lE40KGiQq0/YQCVQ+tpVRqT8QWiEZvd/WVMn1ih+dD//GeUzVgT+2YZ53Z1QgWnv4YrWMcV3J/CGZjGHayzslXloy/uMHPu4hzvzt7kg0s3eP/S9f+F+e17s99hdq5/AIfLJIzxCllQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8735d3af1d12bb2b3bb79d1303c5de89/5e4cb/generate-token-page-2.webp 256w,\n/static/8735d3af1d12bb2b3bb79d1303c5de89/43120/generate-token-page-2.webp 429w\"\n              sizes=\"(max-width: 429px) 100vw, 429px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8735d3af1d12bb2b3bb79d1303c5de89/9dd4e/generate-token-page-2.png 256w,\n/static/8735d3af1d12bb2b3bb79d1303c5de89/1bcb2/generate-token-page-2.png 429w\"\n            sizes=\"(max-width: 429px) 100vw, 429px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8735d3af1d12bb2b3bb79d1303c5de89/1bcb2/generate-token-page-2.png\"\n            alt=\"Enter user password\"\n            title=\"Enter user password\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>At the end you'll be presented with one-off <strong>AuthToken</strong>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 421px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22a422a507719499fecb88e2fada4357/3609d/generate-token-page-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.109375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAADvElEQVQ4y42V224bVRSG8xBIXAHilpeABKQi7ngG2nJB4R24S5ECIhXXqKSiouIoFGiVpGkSoiZVEp89tseek+0Zn3JwHM+MZ4/nQ3vGIbERqBdL/6y1/vn3v9fsrZl75e1Fbn7+B599scGdxTXu3F2fxNo1XJv01vh0qrce12Xtk8U13vzgK+beeP9LjBZ0z6F1Cu2zf0fnDI770DuF1kzv8p1OH977+AFzr99YIqd51OyISiNEbU5i8lwxBRuFcx6YAw6cAK0xvuJc8hohNXvM/M37iWDB8GOXsihDcxLUWxGmPWa10Odrvc9+L6BuR1SdK85lSO5/CsYEJ6JYH5PSx2QMwZ4hSOtjlIYUi6a4LyVotSKeqyE/ZQIeFwRbSsijVMBOJcRovYxgm3iOcvXYgRNhtiLUZoRqR7EziVLsknM9ZgRH8UyqTUGtGU7ham7Ek/yIH498fk37KHWBZste0lcbArUpHXJNUPewux7NSbSO/Rjtno/d83B6/j/1RsejMeHJXvdsRN0+ptYMWLj1XSJY1F2aXZ9S3adgejEqdY+s4VFu+uQMj6zuojQkxyOju+RND9X2OR1GGLpGyRjy7u3JOVQMD91xqdo+5UZCLJoulWaS5w0XreXHuWJ5FEyXnClFXbr9kEqlQsm4mBY0HJfDmhs7kCLSRVp3SVWHsUje8kjXXLKGGy+W1lxSmoveGtHpdqg2fBZurUy2bHjUO4mQXFU6kCLSkVxA1iQWLY+imdQ1x+eoNkTvBJz1z9HsgPmrGXo0e368+oE6RJ1stebIbXrkdDeerRSTmDMShxJNKXg+IxhvueXFQ5fzkwPP6B5KPcmrjjxWo/jj5MykXrVHFCyPTj/k5OR4Zsu6h+UMqdQvUCeR1weUrQH19pCydUG9NcSccDQ74cjn9omPYVhULI+F2yuXDn2KjTEvqgH7asCRLnhRFTGmDcF+VXCgCTJGGNdShiClC7KmiPkpLYhvUHywX7uxRMkckTIiHucFW6WQDSVkoyjYroRslkI2lZBnpZDtcshOOeltTvJNRbBXHWO1uRJUzBFZK2K9IGLCelHwVJHOQp6WBLsV+bJgrSj4PRuwmhP8mRdsKIInecGuGmK1rznMax4FK2RLGbFVCthTA3bLAX+VA55XknynFLBdCnh06PNzWt7tEb9lRvyS8nlWCjCcMe98dF/+ApYwO3ByAb1zOB5M42ycDJLeyWx/IH8BK8y9On+Xu9/u880PKZa/P+Tew/+PS87yVH7E8sMj3vrwHn8DDkz2erM7dHIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/22a422a507719499fecb88e2fada4357/5e4cb/generate-token-page-3.webp 256w,\n/static/22a422a507719499fecb88e2fada4357/c63f9/generate-token-page-3.webp 421w\"\n              sizes=\"(max-width: 421px) 100vw, 421px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/22a422a507719499fecb88e2fada4357/9dd4e/generate-token-page-3.png 256w,\n/static/22a422a507719499fecb88e2fada4357/3609d/generate-token-page-3.png 421w\"\n            sizes=\"(max-width: 421px) 100vw, 421px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/22a422a507719499fecb88e2fada4357/3609d/generate-token-page-3.png\"\n            alt=\"Copy token\"\n            title=\"Copy token\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"authenticating-users-with-token\" style=\"position:relative;\">Authenticating users with token<a href=\"#authenticating-users-with-token\" aria-label=\"authenticating users with token permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><strong>Auth Token</strong> is used to sign-in user in zhiva application. You can use it in <a href=\"/latest/managing-servers-inside-the-dicom-viewer/#zhiva-login\">Zhiva login</a>, or you can generate <strong>one-off login URL</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>alpha<span class=\"token punctuation\">.</span>zhiva<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>auth<span class=\"token operator\">/</span>oauth<span class=\"token operator\">?</span>token<span class=\"token operator\">=</span><span class=\"token constant\">YOUR_AUTH_TOKEN</span></code></pre></div>\n<p>This link can bo modified if you're using different domain/subdomain than default <code class=\"language-text\">alpha.zhiva.org</code>. Just replace the domain and leave the rest of the path the same. Link for the default domain is also stored in <strong>This Direct Link</strong> just below textfield with token.</p>\n<h3 id=\"access-to-orthanc-explorer\" style=\"position:relative;\">Access to orthanc explorer<a href=\"#access-to-orthanc-explorer\" aria-label=\"access to orthanc explorer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Because this version of the server works with tokens you have to generate one in order to access local explorer. To generate token you have to go through the proces from <a href=\"https://localhost/auth/token\">https://localhost/auth/token</a> again. At the end just copy the token and access explorer by adding this token as query parameter. Your URI should look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token operator\">/</span>zhiva<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>explorer<span class=\"token punctuation\">.</span>html<span class=\"token operator\">?</span>token<span class=\"token operator\">=</span><span class=\"token constant\">YOUR_TOKEN_HERE</span></code></pre></div>\n<p>Remember to give your token <strong>\"Can edit PACS resources?\"</strong> access, otherwise you won't be able to modify anything on the server.</p>\n<p>This token expires in 24h or when the user uses it to login.</p>\n<h2 id=\"access-from-within-internal-network\" style=\"position:relative;\">Access from within internal network<a href=\"#access-from-within-internal-network\" aria-label=\"access from within internal network permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>If you have more than one computer inside your network (or VPN connection), then you can share the server settings with them. To check the server address please run the following command:</p>\n<p>Linux or Mac:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ifconfig</span></code></pre></div>\n<p>Windows</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ipconfig</code></pre></div>\n<p>and look for the setting with the <code class=\"language-text\">inet</code> value that starts with <code class=\"language-text\">192.168.</code>. That should by your address in the local network. You should be able to access the upload page from <code class=\"language-text\">https://192.168.x.x/zhiva/app/explorer.html</code>.</p>\n<h2 id=\"upload-your-dicoms\" style=\"position:relative;\">Upload your DICOMs<a href=\"#upload-your-dicoms\" aria-label=\"upload your dicoms permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Go to <a href=\"https://localhost/zhiva/app/explorer.html#upload?token=YOUR_TOKEN_HERE\">localhost/zhiva/app/explorer.html#upload?token=YOUR_TOKEN_HERE</a> and click on <code class=\"language-text\">Select files to upload</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 360px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/8ef26/upload-dicoms.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.46875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuElEQVQoz43K22/SABjG4f7Bc0amcdkViXCrGbswS4TB2J03DuOBGWM0YjLFncKAUtquZ5ABK8xSCvRn1k3jCefFk/d9v3zC9OwVofuEmVsgdLeZuduEV/0Xg8J/ETzXZjJUCIYqwUBheq4yHiiRiz0ZqpHRmYzXv54wcgqYx+s49QwtMY28t05X3qAjZSJOLY1dS+PbecLOFrNrCL72gNrbG5R3biKWYpRfLlB9F6NRusXR60U+FRcoFxcZNpYJjRUwV8CYT/DNLLTvQycFzip01+A0BV+unK5d3lopQnv1WsJYf0jpWYyPL+6wW7zNwZtlPjxf4v3TJXZ37hLo95iZiUhoJcBKgj2fcG4+ZtLaYOzkmLRzjJ0snpnFt3MErU3CTg4udDcj01aGsf2IYA6h3x9QE5tUqiKiKFGpNWhIMkeVGp/3DpEVjeO6zP5hlf2DCp2uyzgIGfnTvxL6vS66rtGUZUxDR1FVZFmOUhTrKEoTqdlEkiQkqUGv38P3R3jeV0ae9weh3W5j6DqWaWIYBqZp/mBZ1k/9kqZpqKrKyYka5e+EfD5PPB4nmUxGEonEP33/m+cbzLj1fn9fG84AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/5e4cb/upload-dicoms.webp 256w,\n/static/e677f39fcf1cda14e9ab6fa629c681e0/2144c/upload-dicoms.webp 360w\"\n              sizes=\"(max-width: 360px) 100vw, 360px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/9dd4e/upload-dicoms.png 256w,\n/static/e677f39fcf1cda14e9ab6fa629c681e0/8ef26/upload-dicoms.png 360w\"\n            sizes=\"(max-width: 360px) 100vw, 360px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e677f39fcf1cda14e9ab6fa629c681e0/8ef26/upload-dicoms.png\"\n            alt=\"Upload dicoms screenshot\"\n            title=\"Upload dicoms screenshot\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>After selecting all the DICOMs click <code class=\"language-text\">Start the upload</code> to store them on the server.</p>\n<p>All DICOMs are stored in <a href=\"https://docs.docker.com/storage/volumes/\">Docker's persistent volume</a> so even after restarting the server all your files are still accessible.</p>\n<p>Now you should be able to access studies which were generated after uploading DICOM files. List of studies is available at <a href=\"https://localhost/zhiva/app/explorer.html#find-studies\">https://localhost/zhiva/app/explorer.html#find-studies</a>.</p>\n<h2 id=\"faqs\" style=\"position:relative;\">FAQs<a href=\"#faqs\" aria-label=\"faqs permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><em>\"How to use this server with your DICOM viewer?\"</em></li>\n</ul>\n<p>Detailed instruction is described in <a href=\"/latest/managing-servers-inside-the-dicom-viewer#zhivaai-local-server-setup\">Managing servers inside the DICOM viewer</a> guide.</p>\n<ul>\n<li><em>\"Why my server doesn't accept very large DICOM files?\"</em></li>\n</ul>\n<p>There is an maximum file size setting inside server config. If you want to change that please go to <code class=\"language-text\">./nginx.conf</code> and modify:</p>\n<div class=\"gatsby-highlight\" data-language=\"nginxconfiguration\"><pre class=\"language-nginxconfiguration\"><code class=\"language-nginxconfiguration\">client_max_body_size 2000m;</code></pre></div>\n<h2 id=\"customization\" style=\"position:relative;\">Customization<a href=\"#customization\" aria-label=\"customization permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"url\" style=\"position:relative;\">URL<a href=\"#url\" aria-label=\"url permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>You're able to change server url by modifying two settings:</p>\n<ul>\n<li><code class=\"language-text\">orthanc.json</code> - inner server settings</li>\n<li><code class=\"language-text\">nginx.conf</code> - main server settings</li>\n</ul>\n<p>Inside <code class=\"language-text\">orthanc.json</code> go to <code class=\"language-text\">DicomWeb</code> attribute and change <code class=\"language-text\">Root</code> property. This property is responsible for path to <code class=\"language-text\">dicom-web</code> server (the one used by the viewer).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// orthanc.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"DicomWeb\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    <span class=\"token string\">\"Root\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/pacs/\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you want to change main path to your server you have to modify the second setting (<code class=\"language-text\">nginx.conf</code>). Path is defined as a location and rewrite (reverse-proxy). Change following lines</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// nginx.conf</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    location <span class=\"token operator\">/</span>zhiva <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n      rewrite <span class=\"token operator\">/</span><span class=\"token function\">zhiva</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> $<span class=\"token number\">1</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>you can change it to:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// nginx.conf</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    location <span class=\"token operator\">/</span>serv <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n      rewrite <span class=\"token operator\">/</span><span class=\"token function\">serv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> $<span class=\"token number\">1</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>and access your server at <code class=\"language-text\">https://localhost/serv/...</code></p>\n<h3 id=\"storage\" style=\"position:relative;\">Storage<a href=\"#storage\" aria-label=\"storage permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Currently, all the data are stored in <a href=\"https://docs.docker.com/storage/volumes/\">Docker's persistent volume</a>. This is volume created by Docker itself. If you want to specify the path please follow the instruction from the <a href=\"https://docs.docker.com/compose/compose-file/compose-file-v3/#short-syntax-3\">Docker Docs</a> about setting up directories as volumes.</p>","fields":{"slug":"/setting-up-local-pacs-with-jwt"},"frontmatter":{"date":"July 26, 2022","title":"Setting up Local PACS with JWT","category":"dicom-server","description":"How to setup local server to store DICOM files and use it as a data provider for the app?"}},"openapiYaml":{"info":{"contact":{"email":"ceo@zhiva.org","url":"https://zhiva.org"},"description":"This is a documentation for _ZhivaAI_ products. Feel free to read the whole thing but here is a:\n\n# Quickstart\n\nIf you want to setup everything for your local research please execute following steps:\n\n### 1. Setup Local PACS server\n\nYou have to have something that servers the __DICOM__ data. Usually this is a __PACS server__ with __DICOMWeb__. Setting local server is easy and everything you should do is described in [Setting up Local PACS](/latest/setting-up-local-pacs). If your server deals with multiple users you should consider [Setting up PACS with JWT](/latest/setting-up-local-pacs-with-jwt). This version of PACS gives you ability to easily create multiple users with limited access to the server.\n\n### 2. Add Local PACS server to application settings\n\nAfter creating Local PACS you have to [Add that server to the application](/latest/managing-servers-inside-the-dicom-viewer) so you can use its data.\n\n### 3. Setup your AI Model server\n\nNow you have to have something that makes inferences. If you have your own model (or want to use ours) please follow the instruction: [Setting up Local Model API](/latest/setting-up-local-model-api)\n\n### 4. Setup proxy server for your AI Model\n\nWhen you have a model you cannot just connect it directly to the application. You have to __add data providers__ (PACS servers) to it. Reason for that is that sending DICOM data directly from an application is extremely inefficient. How to setup a proxy server is described in [Setting up Model Proxy](/latest/setting-up-model-proxy)\n\n### 5. Add your models to application settings\n\nAt the end you have to add your models that are now accessible through [Model Proxy](/latest/setting-up-model-proxy) to application. Please follow [Managing AI Models inside the DICOM viewer](/latest/managing-ai-models-inside-the-dicom-viewer) guide.\n\n### 6. Setup your user accounts (optional but advised)\n\n#### For [Basic Local PACS](/latest/setting-up-local-pacs)\n\nUsually you're dealing with more than one account. Some of them should have write permission and some of them are only for viewing data. [Example setup](/latest/local-pacs-security/#example-setup) explains how to set accounts for different users in your local environment.\n\n#### For [Local PACS with JWT](/latest/setting-up-local-pacs-with-jwt)\n\nIf you're using PACS with Tokens you're usually dealing with mode users. Every user should have its own account created by Administrator as described in [User account](/latest/setting-up-local-pacs-with-jwt#user-accounts) section.\n\n### 7. You're good to go\n\nYour architecture should look like this:\n\n![local architecture](/local_architecture.png)","termsOfService":"https://zhiva.org/terms/","title":"ZhivaAI","version":"0.3.1"},"openapi":"3.1.0","x_tagGroups":[{"name":"Segmentation","section":"inferences","tags":[{"name":"Semantic Segmentation","slug":"semantic-segmentation"}],"slug":"segmentation"},{"name":"Annotations","section":"inferences","tags":[{"name":"Polygon","slug":"polygon"}],"slug":"annotations"},{"name":"Predictions","section":"inferences","tags":[],"slug":"predictions"}],"spec":"{\"openapi\":\"3.1.0\",\"info\":{\"version\":\"0.3.1\",\"title\":\"ZhivaAI\",\"termsOfService\":\"https://zhiva.org/terms/\",\"contact\":{\"email\":\"ceo@zhiva.org\",\"url\":\"https://zhiva.org\"},\"description\":\"This is a documentation for _ZhivaAI_ products. Feel free to read the whole thing but here is a:\\n\\n# Quickstart\\n\\nIf you want to setup everything for your local research please execute following steps:\\n\\n### 1. Setup Local PACS server\\n\\nYou have to have something that servers the __DICOM__ data. Usually this is a __PACS server__ with __DICOMWeb__. Setting local server is easy and everything you should do is described in [Setting up Local PACS](/latest/setting-up-local-pacs). If your server deals with multiple users you should consider [Setting up PACS with JWT](/latest/setting-up-local-pacs-with-jwt). This version of PACS gives you ability to easily create multiple users with limited access to the server.\\n\\n### 2. Add Local PACS server to application settings\\n\\nAfter creating Local PACS you have to [Add that server to the application](/latest/managing-servers-inside-the-dicom-viewer) so you can use its data.\\n\\n### 3. Setup your AI Model server\\n\\nNow you have to have something that makes inferences. If you have your own model (or want to use ours) please follow the instruction: [Setting up Local Model API](/latest/setting-up-local-model-api)\\n\\n### 4. Setup proxy server for your AI Model\\n\\nWhen you have a model you cannot just connect it directly to the application. You have to __add data providers__ (PACS servers) to it. Reason for that is that sending DICOM data directly from an application is extremely inefficient. How to setup a proxy server is described in [Setting up Model Proxy](/latest/setting-up-model-proxy)\\n\\n### 5. Add your models to application settings\\n\\nAt the end you have to add your models that are now accessible through [Model Proxy](/latest/setting-up-model-proxy) to application. Please follow [Managing AI Models inside the DICOM viewer](/latest/managing-ai-models-inside-the-dicom-viewer) guide.\\n\\n### 6. Setup your user accounts (optional but advised)\\n\\n#### For [Basic Local PACS](/latest/setting-up-local-pacs)\\n\\nUsually you're dealing with more than one account. Some of them should have write permission and some of them are only for viewing data. [Example setup](/latest/local-pacs-security/#example-setup) explains how to set accounts for different users in your local environment.\\n\\n#### For [Local PACS with JWT](/latest/setting-up-local-pacs-with-jwt)\\n\\nIf you're using PACS with Tokens you're usually dealing with mode users. Every user should have its own account created by Administrator as described in [User account](/latest/setting-up-local-pacs-with-jwt#user-accounts) section.\\n\\n### 7. You're good to go\\n\\nYour architecture should look like this:\\n\\n![local architecture](/local_architecture.png)\"},\"tags\":[{\"name\":\"Semantic Segmentation\",\"description\":\"Semantic Segmentation API\"},{\"name\":\"Polygon\",\"description\":\"Polygon Annotations\"}],\"x-tagGroups\":[{\"name\":\"Segmentation\",\"section\":\"inferences\",\"tags\":[\"Semantic Segmentation\"],\"slug\":\"segmentation\"},{\"name\":\"Annotations\",\"section\":\"inferences\",\"tags\":[\"Polygon\"],\"slug\":\"annotations\"},{\"name\":\"Predictions\",\"section\":\"inferences\",\"tags\":[],\"slug\":\"predictions\"}],\"servers\":[{\"url\":\"https://api.zhiva.org/v1\"}],\"paths\":{\"/segmentations/{model-uid}/studies/{study-uid}\":{\"get\":{\"tags\":[\"Semantic Segmentation\"],\"summary\":\"Get segmentation for study\",\"description\":\"Should return segmentation data for a given segment. Response size should match entire volumen size (`images in series` x `width` x `height`)\\n\",\"operationId\":\"getSegmentationForStudyies\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}},{\"name\":\"data-filters\",\"in\":\"query\",\"description\":\"List of data filters\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/DataFilter\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/StudySegmentation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/segmentations/{model-uid}/studies/{study-uid}/series/{series-uid}\":{\"get\":{\"tags\":[\"Semantic Segmentation\"],\"summary\":\"Get segmentation for series\",\"description\":\"Should return segmentation data for a given segment. Response size should match entire volumen size (`images in series` x `width` x `height`)\\n\",\"operationId\":\"getSegmentationForSeries\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}},{\"name\":\"data-filters\",\"in\":\"query\",\"description\":\"List of data filters\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/DataFilter\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/SeriesSegmentation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/segmentations/{model-uid}/studies/{study-uid}/series/{series-uid}/instances/{sop-instance-uid}\":{\"get\":{\"tags\":[\"Semantic Segmentation\"],\"summary\":\"Get segmentation for instance\",\"description\":\"Should return segmentation data for a given segment. Response size should match entire volumen size (`width` x `height`)\\n\",\"operationId\":\"getSegmentationForInstance\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from study\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"sop-instance-uid\",\"in\":\"path\",\"description\":\"SOPInstanceUID from series\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SOPInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.9\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/InstanceSegmentation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/annotations/{model-uid}/studies/{study-uid}\":{\"get\":{\"tags\":[\"Polygon\"],\"summary\":\"Get annotations for study\",\"description\":\"Should return annotation data for a given structure. Response size should match entire volumen size (`images in series`)\\n\",\"operationId\":\"getAnnotationsForStudies\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}},{\"name\":\"data-filters\",\"in\":\"query\",\"description\":\"List of data filters\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/DataFilter\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/StudyAnnotation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/annotations/{model-uid}/studies/{study-uid}/series/{series-uid}\":{\"get\":{\"tags\":[\"Polygon\"],\"summary\":\"Get annotations for series\",\"description\":\"Should return annotation data for a given structure. Response size should match entire volumen size (`images in series` x `width` x `height`)\\n\",\"operationId\":\"getAnnotationsForSeries\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}},{\"name\":\"data-filters\",\"in\":\"query\",\"description\":\"List of data filters\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/DataFilter\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/SeriesAnnotation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/annotations/{model-uid}/studies/{study-uid}/series/{series-uid}/instances/{sop-instance-uid}\":{\"get\":{\"tags\":[\"Polygon\"],\"summary\":\"Get annotations for instance\",\"description\":\"Should return annotations data for a given instance. Response size should match entire volumen size (`width` x `height`)\\n\",\"operationId\":\"getSegmentationForInstance\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from study\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"sop-instance-uid\",\"in\":\"path\",\"description\":\"SOPInstanceUID from series\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SOPInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.9\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/InstanceAnnotation\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/predictions/{model-uid}/studies/{study-uid}\":{\"get\":{\"tags\":[\"Predictions\"],\"summary\":\"Get prediction for study\",\"description\":\"Should return prediction data for a given study.\\n\",\"operationId\":\"getPredictionForStudyies\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}},{\"name\":\"data-filters\",\"in\":\"query\",\"description\":\"List of data filters\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/DataFilter\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/StudyPrediction\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/predictions/{model-uid}/studies/{study-uid}/series/{series-uid}\":{\"get\":{\"tags\":[\"Predictions\"],\"summary\":\"Get prediction for series\",\"description\":\"Should return prediction data for a given series.\\n\",\"operationId\":\"getPredictionForSeries\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}},{\"name\":\"data-filters\",\"in\":\"query\",\"description\":\"List of data filters\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/DataFilter\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/SeriesPrediction\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}},\"/predictions/{model-uid}/studies/{study-uid}/series/{series-uid}/instances/{sop-instance-uid}\":{\"get\":{\"tags\":[\"Predictions\"],\"summary\":\"Get prediction for instance\",\"description\":\"Should return segmentation data for a given instance.\\n\",\"operationId\":\"getPredictionForInstance\",\"parameters\":[{\"name\":\"model-uid\",\"in\":\"path\",\"description\":\"UID of the model\",\"required\":true,\"schema\":{\"type\":\"string\"}},{\"name\":\"study-uid\",\"in\":\"path\",\"description\":\"StudyInstanceUID from DICOM metadata\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"StudyInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095438.5\"}},{\"name\":\"series-uid\",\"in\":\"path\",\"description\":\"SeriesInstanceUID from study\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SeriesInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.8\"}},{\"name\":\"sop-instance-uid\",\"in\":\"path\",\"description\":\"SOPInstanceUID from series\",\"required\":true,\"schema\":{\"type\":\"string\",\"format\":\"SOPInstanceUID\",\"example\":\"1.3.6.1.4.1.25403.345050719074.3824.20170125095449.9\"}},{\"name\":\"server\",\"in\":\"query\",\"description\":\"Server UUID to use instead of default one\",\"required\":false,\"schema\":{\"type\":\"string\",\"format\":\"UUIDv4\",\"example\":\"701ea23e-27bf-4b18-8296-e621fc96d4a1\"}}],\"security\":[{\"main_auth\":[\"read:model\"]}],\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/InstancePrediction\"}}}},\"403\":{\"description\":\"Forbidden\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"You have no access to this model\"}}}},\"404\":{\"description\":\"Data not found\",\"$ref\":\"#/components/responses/Problem\",\"content\":{\"application/json\":{\"example\":{\"message\":\"Not found\"}}}}}}}},\"components\":{\"securitySchemes\":{\"main_auth\":{\"type\":\"oauth2\",\"flows\":{\"implicit\":{\"authorizationUrl\":\"http://example.com/api/oauth/dialog\",\"scopes\":{\"read:models\":\"read users info\"}}}},\"api_key\":{\"type\":\"apiKey\",\"in\":\"header\",\"name\":\"api_key\"}},\"schemas\":{\"ModelInput_Study\":{\"oneOf\":[{\"$ref\":\"#/components/schemas/FullStudyModelInput\"},{\"$ref\":\"#/components/schemas/FilteredStudyModelInput\"}]},\"ModelInput_Series\":{\"oneOf\":[{\"$ref\":\"#/components/schemas/FullSeriesModelInput\"},{\"$ref\":\"#/components/schemas/FilteredSeriesModelInput\"}]},\"ModelInput_Instance\":{\"$ref\":\"#/components/schemas/FullInstanceModelInput\"},\"DataFilter\":{\"type\":\"array\",\"items\":{\"description\":\"DataFilter Object\",\"type\":\"object\",\"required\":[\"dataKey\",\"uuid\"],\"properties\":{\"dataKey\":{\"type\":\"string\",\"description\":\"Key used by model to identify data\",\"example\":\"pre-contrast-series\"},\"uuid\":{\"type\":\"string\",\"example\":\"1d64342f-926c-4c07-b448-59c59823d469\"},\"dataFilter\":{\"type\":\"array\",\"items\":{\"description\":\"DataFilter Object\",\"type\":\"object\",\"required\":[\"dataKey\",\"uuid\"],\"properties\":{\"dataKey\":{\"type\":\"string\",\"description\":\"Key used by model to identify data\",\"example\":\"pre-contrast-series\"},\"uuid\":{\"type\":\"string\",\"example\":\"1d64342f-926c-4c07-b448-59c59823d469\"}}}}}}},\"Metadata\":{\"description\":\"Metadata Object\",\"type\":\"object\",\"required\":[\"dataType\",\"value\",\"title\"],\"properties\":{\"dataType\":{\"type\":\"string\",\"enum\":[\"percentage\",\"date\",\"text\",\"number\"],\"example\":\"percentage\"},\"value\":{\"type\":[\"string\",\"number\"],\"example\":12},\"title\":{\"type\":\"string\",\"example\":\"Risk\"},\"description\":{\"type\":\"string\",\"example\":\"Risk of patient having a malignant tumor\"},\"titleColor\":{\"type\":\"string\",\"example\":\"rgb(255,0,0)\"},\"contentColor\":{\"type\":\"string\",\"example\":\"rgb(255,0,0)\"},\"backgroundColor\":{\"type\":\"string\",\"example\":\"rgb(0,0,255)\"},\"boldContent\":{\"type\":\"boolean\",\"example\":true}}},\"Segment\":{\"description\":\"Segment definition (one slide)\",\"type\":\"object\",\"required\":[\"points\",\"color\",\"className\"],\"properties\":{\"points\":{\"type\":\"array\",\"title\":\"Points Array\",\"items\":{\"title\":\"row\",\"type\":\"array\",\"items\":{\"title\":\"column\",\"type\":\"integer\"}},\"example\":[[0,0,1,0],[0,1,1,0]]},\"color\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"classColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\",\"default\":\"same as \\\"color\\\"\"},\"activeColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\",\"default\":\"same as \\\"color\\\"\"},\"className\":{\"type\":\"string\",\"example\":\"Lung\"},\"description\":{\"type\":\"string\"}}},\"StudySegmentation\":{\"type\":\"object\",\"required\":[\"StudyInstanceUID\"],\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"SeriesInstanceUID\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"SOPInstanceUID\",\"required\":[\"segments\"],\"properties\":{\"segments\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Segment\"}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"Problem\":{\"type\":\"object\",\"additionalProperties\":true,\"minProperties\":1,\"doNotRender\":true,\"description\":\"The Problem Details JSON Object [[RFC7807](https://tools.ietf.org/html/rfc7807)].\",\"properties\":{\"type\":{\"type\":\"string\",\"description\":\"A URI reference [[RFC3986](https://tools.ietf.org/html/rfc3986)] that identifies the problem type. It should provide human-readable documentation for the problem type. When this member is not present, its value is assumed to be \\\"about:blank\\\".\",\"format\":\"uri\"},\"title\":{\"type\":\"string\",\"description\":\"A short, human-readable summary of the problem type. It SHOULD NOT change from occurrence to occurrence of the problem, except for purposes of localization.\"},\"status\":{\"type\":\"integer\",\"description\":\"The HTTP status code.\",\"minimum\":400,\"maximum\":599},\"detail\":{\"type\":\"string\",\"description\":\"A human-readable explanation specific to this occurrence of the problem.\"},\"instance\":{\"type\":\"string\",\"description\":\"A URI reference that identifies the specific occurrence of the problem.  It may or may not yield further information if dereferenced.\"}}},\"SeriesSegmentation\":{\"type\":\"object\",\"required\":[\"StudyInstanceUID\"],\"properties\":{\"StudyInstanceUID\":{\"required\":[\"SeriesInstanceUID\"],\"type\":\"object\",\"properties\":{\"SeriesInstanceUID\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"SOPInstanceUID\",\"required\":[\"segments\"],\"properties\":{\"segments\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Segment\"}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"InstanceSegmentation\":{\"description\":\"Segmentation object\",\"type\":\"object\",\"required\":[\"StudyInstanceUID\"],\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"required\":[\"SeriesInstanceUID\"],\"properties\":{\"SeriesInstanceUID\":{\"type\":\"object\",\"properties\":{\"SOPInstanceUID\":{\"required\":[\"segments\"],\"properties\":{\"segments\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Segment\"}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"Roi\":{\"description\":\"Segment definition (one slide)\",\"type\":\"object\",\"required\":[\"points\",\"color\",\"className\"],\"properties\":{\"points\":{\"type\":\"array\",\"title\":\"Points Array\",\"items\":{\"type\":\"array\",\"length\":2,\"items\":{\"title\":\"Point\",\"format\":\"x,y\",\"type\":\"integer\"}},\"example\":\"[[120,130], [110, 130], [75, 100]]\"},\"color\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\"},\"classColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\",\"default\":\"same as \\\"color\\\"\"},\"activeColor\":{\"type\":\"string\",\"format\":\"RGB\",\"example\":\"rgb(120, 80, 40)\",\"default\":\"same as \\\"color\\\"\"},\"className\":{\"type\":\"string\",\"example\":\"Lung\"},\"description\":{\"type\":\"string\"}}},\"StudyAnnotation\":{\"type\":\"object\",\"required\":[\"StudyInstanceUID\"],\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"required\":[\"SeriesInstanceUID\"],\"additionalProperties\":{\"type\":\"object\",\"required\":[\"SOPInstanceUID\"],\"minItems\":1,\"x-additionalPropertiesName\":\"SeriesInstanceUID\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"SOPInstanceUID\",\"required\":[\"rois\"],\"properties\":{\"rois\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Roi\"}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"SeriesAnnotation\":{\"type\":\"object\",\"required\":[\"StudyInstanceUID\"],\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"required\":[\"SeriesInstanceUID\"],\"properties\":{\"SeriesInstanceUID\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"SOPInstanceUID\",\"required\":[\"rois\"],\"properties\":{\"rois\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Roi\"}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"InstanceAnnotation\":{\"description\":\"Annotation object\",\"type\":\"object\",\"required\":[\"StudyInstanceUID\"],\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"required\":[\"SeriesInstanceUID\"],\"properties\":{\"SeriesInstanceUID\":{\"type\":\"object\",\"required\":[\"SOPInstanceUID\"],\"properties\":{\"SOPInstanceUID\":{\"required\":[\"rois\"],\"properties\":{\"rois\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Roi\"}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"StudyPrediction\":{\"type\":\"object\",\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"SeriesPrediction\":{\"type\":\"object\",\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"properties\":{\"SeriesInstanceUID\":{\"type\":\"object\",\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"InstancePrediction\":{\"description\":\"Segmentation object\",\"type\":\"object\",\"properties\":{\"StudyInstanceUID\":{\"type\":\"object\",\"properties\":{\"SeriesInstanceUID\":{\"type\":\"object\",\"properties\":{\"SOPInstanceUID\":{\"type\":\"object\",\"properties\":{\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}},\"metadata\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/components/schemas/Metadata\"}}}}}},\"FullStudyModelInput\":{\"type\":\"array\",\"description\":\"List of Study instances (includes all instances from all series)\",\"doNotRender\":true,\"title\":\"Full study model input\",\"items\":{\"description\":\"Binary DICOM data encoded\",\"type\":\"string\",\"format\":\"Binary<DICOM DATA>\",\"example\":\"[0,0,0,1,5,21,...,21,0]\"}},\"FullInstanceModelInput\":{\"type\":\"string\",\"format\":\"Binary<DICOM DATA>\",\"example\":\"[0,0,0,1,5,21,...,21,0]\",\"description\":\"Binary DICOM data encoded\",\"doNotRender\":true,\"title\":\"Full instance model input\"},\"FullSeriesModelInput\":{\"type\":\"array\",\"description\":\"List of Series instances\",\"doNotRender\":true,\"title\":\"Full series model input\",\"items\":{\"$ref\":\"#/components/schemas/FullInstanceModelInput\"}},\"FilteredSeriesModelInput\":{\"type\":\"object\",\"doNotRender\":true,\"title\":\"Filtered series model input\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"instance-key\",\"properties\":{\"data\":{\"type\":\"string\",\"format\":\"Binary<DICOM DATA>\",\"example\":\"[0,0,0,1,5,21,...,21,0]\",\"description\":\"Binary DICOM data encoded\"}}}},\"FilteredStudyModelInput\":{\"type\":\"object\",\"doNotRender\":true,\"title\":\"Filtered study model input\",\"additionalProperties\":{\"type\":\"object\",\"minItems\":1,\"x-additionalPropertiesName\":\"series-key\",\"properties\":{\"data\":{\"oneOf\":[{\"$ref\":\"#/components/schemas/FullSeriesModelInput\"},{\"$ref\":\"#/components/schemas/FilteredSeriesModelInput\"}]}}}}},\"responses\":{\"Problem\":{\"content\":{\"application/problem+json\":{\"schema\":{\"$ref\":\"#/components/schemas/Problem\"}}}}}}}","slug":"0-3-1","tags":[{"description":"Semantic Segmentation API","name":"Semantic Segmentation"},{"description":"Polygon Annotations","name":"Polygon"}]},"allOpenapiYaml":{"nodes":[{"info":{"version":"0.1.1"},"slug":"0-1-1"},{"info":{"version":"0.2.2"},"slug":"0-2-2"},{"info":{"version":"0.3.1"},"slug":"0-3-1"}]},"site":{"siteMetadata":{"categories":[{"name":"Inferences","key":"inferences"},{"name":"Annotations","key":"annotation"},{"name":"Storage","key":"storage"},{"name":"Hosting","key":"hosting"},{"name":"Machine Learning","key":"ml"},{"name":"API Schemas","key":"api-schemas"},{"name":"DICOM Server","key":"dicom-server"},{"name":"AI Model APIs","key":"model-api"}]}}},"pageContext":{"markdownid":"d21440d8-f8cc-50ca-b87f-863570aec734","verid":"e28b1e3f-37fc-502b-b6bc-01992b382d68"}},
    "staticQueryHashes": ["1428769721","2970016195"]}